<!DOCTYPE html><html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>VEGABOT | VG1</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600&display=swap');
    * { box-sizing: border-box; }
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Vazirmatn', sans-serif;
      background: linear-gradient(135deg, #0a0f1a, #121829, #1e2a47);
      overflow: hidden;
      color: #e5e7eb;
      display: flex; justify-content: center; align-items: center;
    }
    body::before, body::after {
      content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      z-index: -2;
    }
    body::before {
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.05), transparent 60%),
                  radial-gradient(circle at 80% 40%, rgba(255,255,255,0.03), transparent 50%);
      animation: pulseBackground 20s linear infinite;
    }
    body::after {
      background: linear-gradient(60deg, #4f46e5 0%, #3b82f6 50%, #9333ea 100%);
      opacity: 0.08;
      filter: blur(150px);
      animation: pulseGradient 25s linear infinite alternate;
      z-index: -3;
    }
    @keyframes pulseBackground {
      0%, 100% {background-position: 20% 20%, 80% 40%;}
      50% {background-position: 80% 40%, 20% 20%;}
    }
    @keyframes pulseGradient {
      0% {opacity: 0.08;} 50% {opacity: 0.14;} 100% {opacity: 0.08;}
    }
    .container {
      width: 100%; max-width: 420px; height: 100vh;
      background: rgba(25, 29, 48, 0.52);
      border-radius: 28px 28px 0 0;
      box-shadow: 0 6px 24px rgba(0, 0, 0, 0.55), inset 0 0 35px rgba(255, 255, 255, 0.07);
      backdrop-filter: blur(18px);
      border-top: 1px solid rgba(255, 255, 255, 0.12);
      display: flex; flex-direction: column; overflow: hidden; position: relative;
    }
    header {
      background: linear-gradient(270deg, #8b5cf6, #6366f1, #8b5cf6);
      background-size: 300% 300%;
      animation: gradientShiftMedium 12s ease infinite;
      padding: 20px 30px; font-weight: 700; font-size: 22px; text-align: center;
      letter-spacing: 3px; color: #f3f4f6; box-shadow: 0 0 24px #8b5cf6aa;
      text-transform: uppercase; user-select: none; position: relative;
      z-index: 10; filter: drop-shadow(0 0 6px #8b5cf6);
      font-family: 'Plus Jakarta Sans', sans-serif;
    }
    header::before {
      content: ""; position: absolute; top: 0; left: -60%; width: 120%; height: 100%;
      background: linear-gradient(90deg, rgba(255 255 255 / 0.15), rgba(255 255 255 / 0));
      filter: blur(28px);
      transform: translateX(-100%);
      animation: shineMove 3.8s linear infinite;
      pointer-events: none; z-index: 15;
    }
    @keyframes gradientShiftMedium {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }
    @keyframes shineMove {
      0% {transform: translateX(-100%);}
      100% {transform: translateX(220%);}
    }
    .chat-log {
      flex: 1; padding: 20px 28px 90px 28px; overflow-y: auto;
      display: flex; flex-direction: column; gap: 16px;
      scrollbar-width: thin; scrollbar-color: #8b5cf6 transparent;
      background: linear-gradient(270deg, #1e2a47, #3b4276, #1e2a47);
      background-size: 600% 600%; animation: gradientShiftMedium 10s ease infinite;
      border-radius: 0 0 28px 28px;
    }
    .message { max-width: 80%; padding: 16px 20px; border-radius: 24px;
      font-size: 15.5px; line-height: 1.5; font-family: 'Plus Jakarta Sans', sans-serif;
      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25); }
    .message.user {
      margin-left: auto;
      background: linear-gradient(120deg, #7c3aed, #a78bfa);
      color: #fff; box-shadow: 0 4px 15px rgba(124, 58, 237, 0.6);
    }
    .message.bot {
      margin-right: auto;
      background: linear-gradient(120deg, #3b82f6, #60a5fa);
      color: #fff; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.6);
    }
    .input-area {
      position: fixed; bottom: 12px; width: 100%; max-width: 420px;
      padding: 0 20px 12px 20px; display: flex; align-items: center;
      gap: 14px; z-index: 15;
    }
    .input-area input {
      flex-grow: 1; padding: 14px 20px; font-size: 16px; border-radius: 24px;
      border: none; outline: none; background: rgba(255 255 255 / 0.1);
      color: #f3f4f6; font-family: 'Plus Jakarta Sans', sans-serif;
    }
    .input-area input::placeholder { color: #ccc; }
    .send-button {
      width: 48px; height: 48px;
      background: linear-gradient(45deg, #8b5cf6, #6366f1);
      border-radius: 50%; border: none; cursor: pointer;
      color: #fff; font-size: 22px; display: flex; justify-content: center; align-items: center;
    }
    @media screen and (max-width: 420px) {
      .container { width: 100vw; max-width: 100vw; height: 100vh; border-radius: 0; box-shadow: none; backdrop-filter: none; }
      .input-area { max-width: 100vw; padding: 0 12px 12px 12px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>VEGABOT | VG1</header>
    <div class="chat-log" id="chatLog"></div>
    <form class="input-area" id="chatForm">
      <input type="text" id="userInput" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³..." required />
      <button type="submit" class="send-button">&#9658;</button>
    </form>
  </div>
  <script>
    const DB_NAME = 'vegabotDB';
    const STORE_NAME = 'responses';
    const JSON_URL = 'https://raw.githubusercontent.com/vegasvip13/data/main/responses.json';const chatLog = document.getElementById('chatLog');
const chatForm = document.getElementById('chatForm');
const userInput = document.getElementById('userInput');
let db;

async function openDB() {
  return new Promise((resolve, reject) => {
    const request = indexedDB.open(DB_NAME, 1);
    request.onupgradeneeded = (e) => {
      const db = e.target.result;
      if (!db.objectStoreNames.contains(STORE_NAME)) {
        db.createObjectStore(STORE_NAME, { keyPath: 'input' });
      }
    };
    request.onsuccess = (e) => resolve(e.target.result);
    request.onerror = () => reject('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯ÛŒØªØ§Ø¨ÛŒØ³');
  });
}

async function loadResponses() {
  const response = await fetch(JSON_URL);
  const data = await response.json();

  const tx = db.transaction(STORE_NAME, 'readwrite');
  const store = tx.objectStore(STORE_NAME);
  data.forEach(item => store.put(item));
  return tx.complete;
}

async function getBotReply(userText) {
  const tx = db.transaction(STORE_NAME, 'readonly');
  const store = tx.objectStore(STORE_NAME);
  const all = store.getAll();
  return new Promise((resolve, reject) => {
    all.onsuccess = () => {
      const match = all.result.find(item =>
        item.input.toLowerCase().trim() === userText.toLowerCase().trim()
      );
      resolve(match ? match.response : 'Ù¾Ø§Ø³Ø®ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ÙˆØ±ÙˆØ¯ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ ðŸ˜”');
    };
    all.onerror = () => reject('Ø®Ø·Ø§ Ø¯Ø± Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³');
  });
}

function addMessage(message, sender) {
  const msgDiv = document.createElement('div');
  msgDiv.className = 'message ' + sender;
  msgDiv.textContent = message;
  chatLog.appendChild(msgDiv);
  chatLog.scrollTop = chatLog.scrollHeight;
}

chatForm.addEventListener('submit', async function (e) {
  e.preventDefault();
  const userMessage = userInput.value.trim();
  if (!userMessage) return;
  addMessage(userMessage, 'user');
  userInput.value = '';
  const botReply = await getBotReply(userMessage);
  addMessage(botReply, 'bot');
});

window.addEventListener('DOMContentLoaded', async () => {
  db = await openDB();
  await loadResponses();
});

  </script>
</body>
</html>